<ion-view view-title="Browse">
    <ion-content>
        <!-- <a class="item" ui-sref="app.listings">Go to my listings</a> -->
        <div class="list">
            <div class="card">
                <div class="item item-divider aquamarine-heading">Search</div>
                <label class="item item-input">
                    <i class="icon ion-search placeholder-icon search-box-icon"></i>
                    <input type="text" name="search" placeholder="e.g. title, author, publisher, ISBN" ng-model="searchQuery" ng-change="search(searchQuery)"" ng-model-options="{debounce:500}">
                </label>
            </div>
            <!-- <div class="list list-inset">
                <label class="item item-input">
                    <i class="icon ion-search placeholder-icon"></i>
                    <input type="text" name="search" placeholder="Search e.g. title, author, publisher, ISBN" ng-model="searchQuery" ng-change="search(searchQuery)"" ng-model-options="{debounce:500}">
                </label>
            </div> -->
            <!-- <div class="list list-inset">
                <div class="item item-input">
                    <label class="item-input-wrapper">
                        <i class="icon ion-search placeholder-icon"></i>
                        <input type="text" name="search" placeholder="Search" ng-model="searchQuery">
                    </label>
                    <button class="button" ng-click="search(searchQuery)">Go</button>
                </div>
            </div> -->
            <div class="spinner" ng-if="loading">
                <ion-spinner icon="android"></ion-spinner>
            </div>
            <div ng-show="!loading">
                <a class="book-link" ng-href="#/app/listings/{{listing.$id}}" ng-repeat="listing in listings | reverse : mostRecent">
                    <div class="card book-card">
                        <div class="item item-divider book-heading"><span class="price">{{ "£" + listing.price }}</span>{{ listing.title }}</div>
                        <div class="item item-thumbnail-left">
                            <img ng-src="{{ listing.thumbnail || 'img/blue-album.jpg' }}">
                            <h4>{{ listing.author.join(", ") }}</h4>
                            <h4>{{ listing.publisher }}</h4>
                            <h4>ISBN: {{ listing.isbn }}</h4>
                            <h4>{{ listing.subject.join(", ") }}</h4>
                            <p class="snippet">{{ listing.listingDescription }}</p>
                            <p>{{ listing.location }}</p>
                            <span class="book-card-footer">{{ listing.username }} • {{ listing.timestamp | date : 'mediumDate' }}</span>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </ion-content>
</ion-view>
